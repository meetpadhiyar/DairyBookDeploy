"use strict";(self.webpackChunkLog=self.webpackChunkLog||[]).push([[981],{2981:(Zt,M,n)=>{n.r(M),n.d(M,{CompanyModule:()=>vt});var f=n(6895),Y=n(9299),i=n(9549),k=n(1366),l=n(4006),C=n(9602),y=n(7392),s=n(671),g=n(8739),p=n(3546),d=n(5938),_=n(3238),t=n(4650),Z=n(5861),U=n(529),T=n(3724);const N={headers:new U.WM({"Content-Type":"application/json"})};let b=(()=>{class e{constructor(a,m){this.http=a,this.constant=m}updateCompany(a){var m=this;return(0,Z.Z)(function*(){const r=m.constant.updateCompany();return yield m.http.post(r,a,N).toPromise()})()}getCompanyById(a){var m=this;return(0,Z.Z)(function*(){const r=m.constant.getCompanyById();return yield m.http.post(r,a,N).toPromise()})()}getCompanyDetail(a){var m=this;return(0,Z.Z)(function*(){const r=m.constant.getCompanyById();return yield m.http.post(r,a,N).toPromise()})()}}return e.\u0275fac=function(a){return new(a||e)(t.LFG(U.eN),t.LFG(T.s))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var A=n(7009),h=n(4859),D=n(6709),x=n(4144);const B={parse:{dateInput:"DD/MM/YYYY"},display:{dateInput:"DD/MM/YYYY",monthYearLabel:"MMMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let I=(()=>{class e{constructor(a,m,r,c,u,q){this.fb=a,this.companyServices=m,this.snackBar=r,this.constant=c,this.dialogRef=u,this.data=q,this.requestParameters={},this.formTitle="Company Master",this.date=new Date,this.action="",this.companyId=0,this.btnText="",this.isCompanyUser=!0,this.fromCompanyMaster=this.fb.group({companyName:["",l.kI.required],address1:["",l.kI.required],address2:[""],contact1:["",[l.kI.required,this.numberValidator]],contact2:["",this.numberValidator],gstNo:[""],instalationDate:[new Date,l.kI.required],active:[!0,l.kI.required],remark:[""]}),this.action=q.action}ngOnInit(){this.getCompanyById()}on_cancel_button(){this.dialogRef.close()}submit(){try{this.requestParameters.companyId=Number(this.constant.getData("CompanyId")),this.requestParameters.companyName=this.fromCompanyMaster.controls.companyName.value,this.requestParameters.address1=this.fromCompanyMaster.controls.address1.value,this.requestParameters.address2=this.fromCompanyMaster.controls.address2.value,this.requestParameters.contact1=this.fromCompanyMaster.controls.contact1.value,this.requestParameters.contact2=this.fromCompanyMaster.controls.contact2.value,this.requestParameters.gstNo=this.fromCompanyMaster.controls.gstNo.value,this.requestParameters.isActive=this.fromCompanyMaster.controls.active.value,this.requestParameters.remark=this.fromCompanyMaster.controls.remark.value,this.action="updateCompany",this.companyServices.updateCompany(this.requestParameters).then(a=>{!0===a.is_successful?(this.dialogRef.close(),this.snackBar.open(a.message,"close",{duration:2e3,panelClass:["success-snack-bar"],verticalPosition:"top"})):this.snackBar.open(a.message,"close",{duration:2e3,panelClass:["error-snack-bar"],verticalPosition:"top"})})}catch{this.snackBar.open("Oops Something Went Wrong","close",{duration:2e3,panelClass:["error-snack-bar"],verticalPosition:"top"})}}getCompanyById(){"addCompany"===this.action?this.btnText="Save":(this.btnText="Update",this.requestParameters.companyId=this.data.CompanyId,this.companyServices.getCompanyById(this.requestParameters).then(a=>{this.fromCompanyMaster.controls.companyName.setValue(a.data[0].companyName),this.fromCompanyMaster.controls.address1.setValue(a.data[0].address1),this.fromCompanyMaster.controls.address2.setValue(a.data[0].address2),this.fromCompanyMaster.controls.contact1.setValue(a.data[0].contact1),this.fromCompanyMaster.controls.contact2.setValue(a.data[0].contact2),this.fromCompanyMaster.controls.gstNo.setValue(a.data[0].gstNo),this.fromCompanyMaster.controls.remark.setValue(a.data[0].remark),this.fromCompanyMaster.controls.active.setValue(a.data[0].isActive)}))}Dateformat(a){return this.datePipe.transform(a,"yyyy-MM-dd")}numberValidator(a){return isNaN(a.value)?{notANumber:!0}:null}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(l.qu),t.Y36(b),t.Y36(A.ux),t.Y36(T.s),t.Y36(d.so),t.Y36(d.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-company-form"]],features:[t._Bn([{provide:_.sG,useValue:B}])],decls:62,vars:5,consts:[[3,"formGroup"],[2,"height","450px","overflow-y","auto"],[1,"example-header","mt-2"],[1,"example-title"],[1,"example-icon"],[1,"row"],[1,"col-lg-12","col-sm-12"],["appearance","fill"],["matInput","","placeholder","Company","formControlName","companyName"],["company",""],[1,"col-lg-6","col-sm-12"],["matInput","","placeholder","Address 1","formControlName","address1"],["matInput","","placeholder","Address 2","formControlName","address2"],[1,"col-lg-4","col-sm-12"],["matInput","","placeholder","9999999999","formControlName","contact1"],["matInput","","placeholder","9999999999","formControlName","contact2"],["matInput","","placeholder","GST No...","formControlName","gstNo"],["matInput","","datePickerFormat","yyyy-MM-dd","formControlName","instalationDate",3,"matDatepicker"],["matSuffix","",3,"for"],["datepicker",""],["color","primary","formControlName","active"],["matInput","","placeholder","Remark","formControlName","remark"],[1,"mt-2"],["mat-flat-button","","color","primary",1,"example-button",3,"disabled","click"],["mat-flat-button","","color","warn",1,"example-button",3,"click"]],template:function(a,m){if(1&a&&(t.TgZ(0,"form",0)(1,"mat-card",1)(2,"mat-card-header",2)(3,"div",3)(4,"mat-icon",4),t._uU(5,"business"),t.qZA(),t._uU(6," Company "),t.qZA()(),t.TgZ(7,"mat-card-content")(8,"div",5)(9,"div",6)(10,"mat-form-field",7)(11,"mat-label"),t._uU(12,"Company"),t.qZA(),t._UZ(13,"input",8,9),t.qZA()(),t.TgZ(15,"div",10)(16,"mat-form-field")(17,"mat-label"),t._uU(18,"Address 1"),t.qZA(),t._UZ(19,"input",11),t.qZA()(),t.TgZ(20,"div",10)(21,"mat-form-field")(22,"mat-label"),t._uU(23,"Address 2"),t.qZA(),t._UZ(24,"input",12),t.qZA()(),t.TgZ(25,"div",13)(26,"mat-form-field")(27,"mat-label"),t._uU(28,"Contact"),t.qZA(),t._UZ(29,"input",14),t.qZA()(),t.TgZ(30,"div",13)(31,"mat-form-field")(32,"mat-label"),t._uU(33,"Contact"),t.qZA(),t._UZ(34,"input",15),t.qZA()(),t.TgZ(35,"div",13)(36,"mat-form-field")(37,"mat-label"),t._uU(38,"GST No"),t.qZA(),t._UZ(39,"input",16),t.qZA()(),t.TgZ(40,"div",13)(41,"mat-form-field")(42,"mat-label"),t._uU(43,"Instalation date"),t.qZA(),t._UZ(44,"input",17)(45,"mat-datepicker-toggle",18)(46,"mat-datepicker",null,19),t.qZA()(),t.TgZ(48,"div",13)(49,"mat-checkbox",20),t._uU(50,"Active"),t.qZA()(),t.TgZ(51,"div",13)(52,"mat-form-field")(53,"mat-label"),t._uU(54,"Remark"),t.qZA(),t._UZ(55,"input",21),t.qZA()()()(),t.TgZ(56,"mat-card-actions")(57,"div",22)(58,"button",23),t.NdJ("click",function(){return m.submit()}),t._uU(59),t.qZA(),t.TgZ(60,"button",24),t.NdJ("click",function(){return m.on_cancel_button()}),t._uU(61,"Cancel"),t.qZA()()()()()),2&a){const r=t.MAs(47);t.Q6J("formGroup",m.fromCompanyMaster),t.xp6(44),t.Q6J("matDatepicker",r),t.xp6(1),t.Q6J("for",r),t.xp6(13),t.Q6J("disabled",m.fromCompanyMaster.invalid),t.xp6(1),t.Oqu(m.btnText)}},dependencies:[l._Y,l.Fj,l.JJ,l.JL,i.KE,i.hX,i.R9,p.a8,p.hq,p.dn,p.dk,h.lW,y.Hw,C.Mq,C.hl,C.nW,l.sg,l.u,D.oG,x.Nt]}),e})();var v=n(6308);function S(e,o){1&e&&(t.TgZ(0,"mat-header-cell",28),t._uU(1," Company "),t.qZA())}function F(e,o){if(1&e&&(t.TgZ(0,"mat-cell",29),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.hij(" ",a.companyName," ")}}function Q(e,o){1&e&&(t.TgZ(0,"mat-header-cell",28),t._uU(1," Address 1 "),t.qZA())}function J(e,o){if(1&e&&(t.TgZ(0,"mat-cell",29),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.hij(" ",a.address1," ")}}function O(e,o){1&e&&(t.TgZ(0,"mat-header-cell",28),t._uU(1," Address 2 "),t.qZA())}function R(e,o){if(1&e&&(t.TgZ(0,"mat-cell",29),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.hij(" ",a.address2," ")}}function G(e,o){1&e&&(t.TgZ(0,"mat-header-cell",28),t._uU(1," Contact 1 "),t.qZA())}function j(e,o){if(1&e&&(t.TgZ(0,"mat-cell",29),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.hij(" ",a.contact1," ")}}function V(e,o){1&e&&(t.TgZ(0,"mat-header-cell",28),t._uU(1," Contact 2 "),t.qZA())}function L(e,o){if(1&e&&(t.TgZ(0,"mat-cell",29),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.hij(" ",a.contact2," ")}}function H(e,o){1&e&&(t.TgZ(0,"mat-header-cell",28),t._uU(1," GSTNo "),t.qZA())}function W(e,o){if(1&e&&(t.TgZ(0,"mat-cell",29),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.hij(" ",a.gstNo," ")}}function $(e,o){1&e&&(t.TgZ(0,"mat-header-cell",28),t._uU(1," Active "),t.qZA())}const z=function(e,o){return{greenCard:e,redCard:o}};function X(e,o){if(1&e&&(t.TgZ(0,"mat-cell",29)(1,"span",30),t._uU(2),t.qZA()()),2&e){const a=o.$implicit;t.xp6(1),t.Q6J("ngClass",t.WLB(2,z,a.isActive,!a.isActive)),t.xp6(1),t.hij(" ",a.isActive," ")}}function E(e,o){1&e&&(t.TgZ(0,"mat-header-cell",29),t._uU(1," Remark "),t.qZA())}function w(e,o){if(1&e&&(t.TgZ(0,"mat-cell",29),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.hij(" ",a.remark," ")}}function K(e,o){1&e&&(t.TgZ(0,"mat-header-cell",31),t._uU(1," Action "),t.qZA())}function tt(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"mat-cell",31)(1,"a",32),t.NdJ("click",function(){const c=t.CHM(a).$implicit,u=t.oxw();return t.KtG(u.open_compan_form("getCompanyById",c.companyId))}),t.TgZ(2,"mat-icon",33),t._uU(3,"edit"),t.qZA()()()}}function et(e,o){1&e&&t._UZ(0,"tr",34)}function at(e,o){1&e&&t._UZ(0,"tr",35)}const ot=function(){return[10,20,50]};let nt=(()=>{class e{constructor(a,m,r,c,u){this.dialog=a,this.snackBar=m,this.constant=r,this.companyFormServices=c,this.datePipe=u,this.dialog_title="Company",this.requestParameters={},this.displayColumn=["companyName","address1","address2","contact1","contact2","gstNo","isActive","remark","actions"]}ngOnInit(){this.getCompanyDetail()}getCompanyDetail(){this.requestParameters.companyId=Number(this.constant.getData("CompanyId")),this.companyFormServices.getCompanyDetail(this.requestParameters).then(a=>{this._companyTableDataSource=new s.by(a.data),this._companyTableDataSource.paginator=this.paginator,this._companyTableDataSource.sort=this.sort})}getCompanyById(){this.requestParameters.action="getCompanyById",this.requestParameters.companyId=Number(this.constant.getData("CompanyId")),this.companyFormServices.getCompanyById(this.requestParameters).then(a=>{})}applyFilter(a){this._companyTableDataSource.filter=a.target.value.trim().toLowerCase()}open_compan_form(a,m){const r=new d.vA;r.disableClose=!0,r.autoFocus=!0,r.closeOnNavigation=!0,r.maxHeight="100%",r.maxWidth="100%",r.width="1000px",r.height="fit-content",r.data={action:a,CompanyId:m},this.dialog.open(I,r).afterClosed().subscribe(u=>{this.getCompanyDetail()})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(d.uw),t.Y36(A.ux),t.Y36(T.s),t.Y36(b),t.Y36(f.uU))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-company"]],viewQuery:function(a,m){if(1&a&&(t.Gf(v.YE,7),t.Gf(g.NW,7)),2&a){let r;t.iGM(r=t.CRH())&&(m.sort=r.first),t.iGM(r=t.CRH())&&(m.paginator=r.first)}},features:[t._Bn([f.uU])],decls:45,vars:6,consts:[[1,"card"],[1,"card-header","h4"],[1,"card-body"],[1,"row"],[1,"col-lg-4","col-sm-6"],["matInput","","placeholder","Filter",3,"keyup"],[1,"col-lg-6","col-sm-6"],["mat-icon-button","",1,"round-button",3,"click"],[1,"icon-white"],[1,"col-12","mat-table-container"],["matSort","",1,"table-width","table-bordered",3,"dataSource"],["matColumnDef","companyName"],["mat-sort-header","","class","col-lg-2",4,"matHeaderCellDef"],["class","col-lg-2",4,"matCellDef"],["matColumnDef","address1"],["matColumnDef","address2"],["matColumnDef","contact1"],["matColumnDef","contact2"],["matColumnDef","gstNo"],["matColumnDef","isActive"],["matColumnDef","remark"],["class","col-lg-2",4,"matHeaderCellDef"],["matColumnDef","actions"],["class","col-lg-1",4,"matHeaderCellDef"],["class","col-lg-1",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["mat-sort-header","",1,"col-lg-2"],[1,"col-lg-2"],[3,"ngClass"],[1,"col-lg-1"],["mat-icon-button","",3,"click"],[2,"color","#003b9a"],["mat-header-row",""],["mat-row","",1,"example-element-row"]],template:function(a,m){1&a&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"mat-form-field")(7,"input",5),t.NdJ("keyup",function(c){return m.applyFilter(c)}),t.qZA()()(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return m.open_compan_form("addCompany",0)}),t.TgZ(10,"mat-icon",8),t._uU(11,"add"),t.qZA()()()(),t.TgZ(12,"div",3)(13,"div",9)(14,"mat-table",10),t.ynx(15,11),t.YNc(16,S,2,0,"mat-header-cell",12),t.YNc(17,F,2,1,"mat-cell",13),t.BQk(),t.ynx(18,14),t.YNc(19,Q,2,0,"mat-header-cell",12),t.YNc(20,J,2,1,"mat-cell",13),t.BQk(),t.ynx(21,15),t.YNc(22,O,2,0,"mat-header-cell",12),t.YNc(23,R,2,1,"mat-cell",13),t.BQk(),t.ynx(24,16),t.YNc(25,G,2,0,"mat-header-cell",12),t.YNc(26,j,2,1,"mat-cell",13),t.BQk(),t.ynx(27,17),t.YNc(28,V,2,0,"mat-header-cell",12),t.YNc(29,L,2,1,"mat-cell",13),t.BQk(),t.ynx(30,18),t.YNc(31,H,2,0,"mat-header-cell",12),t.YNc(32,W,2,1,"mat-cell",13),t.BQk(),t.ynx(33,19),t.YNc(34,$,2,0,"mat-header-cell",12),t.YNc(35,X,3,5,"mat-cell",13),t.BQk(),t.ynx(36,20),t.YNc(37,E,2,0,"mat-header-cell",21),t.YNc(38,w,2,1,"mat-cell",13),t.BQk(),t.ynx(39,22),t.YNc(40,K,2,0,"mat-header-cell",23),t.YNc(41,tt,4,0,"mat-cell",24),t.BQk(),t.YNc(42,et,1,0,"tr",25),t.YNc(43,at,1,0,"tr",26),t.qZA(),t._UZ(44,"mat-paginator",27),t.qZA()()()()),2&a&&(t.xp6(2),t.hij(" ",m.dialog_title," "),t.xp6(12),t.Q6J("dataSource",m._companyTableDataSource),t.xp6(28),t.Q6J("matHeaderRowDef",m.displayColumn),t.xp6(1),t.Q6J("matRowDefColumns",m.displayColumn),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(5,ot)))},dependencies:[i.KE,h.o6,h.RK,y.Hw,g.NW,v.YE,v.nU,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,f.mk,x.Nt],styles:[".mat-column-isActive[_ngcontent-%COMP%], .mat-column-actions[_ngcontent-%COMP%], .mat-column-companyId[_ngcontent-%COMP%], .mat-column-gstNo[_ngcontent-%COMP%], .mat-column-remark[_ngcontent-%COMP%], .mat-column-companyName[_ngcontent-%COMP%], .mat-column-address1[_ngcontent-%COMP%], .mat-column-address2[_ngcontent-%COMP%]{text-align:left;justify-content:center;align-self:stretch;padding-left:5px;padding-right:5px;border-right:1px solid rgba(0,0,0,.12)}.mat-column-contact1[_ngcontent-%COMP%], .mat-column-contact2[_ngcontent-%COMP%]{text-align:right;justify-content:flex-start!important;align-self:stretch;padding-left:5px;padding-right:5px;word-break:break-word;border-right:1px solid rgba(0,0,0,.12)}"]}),e})();var mt=n(2673),rt=n(8242),lt=n(811),st=n(7331),ct=n(4850),it=n(7084),pt=n(782),dt=n(6338),ut=n(3162),ht=n(1572),ft=n(6257),Ct=n(3848),yt=n(266),P=n(3870);const gt=[{path:"",component:nt,canActivate:[P.a]},{path:"companyform",component:I,canActivate:[P.a]}];let vt=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[l.u5,i.lN,p.QW,ct.t,it.To,pt.N6,dt.ie,h.ot,lt.vV,mt.g,st.Hi,y.Ps,ht.Cq,ut.Cv,_.si,rt._r,d.Is,A.ZX,yt.AV,g.TU,v.JX,s.p0,l.u5,ft.T5,Ct.Nh,f.ez,p.QW,d.Is,i.lN,k.IJ,l.u5,C.FA,l.UX,y.Ps,s.p0,g.TU,D.p9,x.c,h.ot,s.p0,Y.Bz.forChild(gt),Y.Bz,i.lN]}),e})()}}]);