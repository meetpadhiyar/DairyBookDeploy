"use strict";(self.webpackChunkLog=self.webpackChunkLog||[]).push([[998],{6998:(ct,v,r)=>{r.r(v),r.d(v,{UserRightModule:()=>st});var u=r(6895),k=r(9299),d=r(5861),p=r(8739),P=r(6308),s=r(671),h=r(5938),t=r(4650),f=r(3724),c=r(4006),b=r(529);const R={headers:new b.WM({"Content-Type":"application/json"})};let y=(()=>{class n{constructor(e,o){this.http=e,this.constant=o}getAllUserRightsMenu(e){var o=this;return(0,d.Z)(function*(){const i=o.constant.getAllUserRightsMenu();try{const l=yield o.http.get(`${i}?userId=${e}`,R).toPromise();return Promise.resolve(l)}catch(l){return Promise.reject(l)}})()}addUserRights(e){var o=this;return(0,d.Z)(function*(){const i=o.constant.addUserRights();try{const l=yield o.http.post(i,e,R).toPromise();return Promise.resolve(l)}catch(l){return Promise.reject(l)}})()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(b.eN),t.LFG(f.s))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Z=r(7009),x=r(6338),T=r(4850),g=r(3546),C=r(7392),U=r(4859),M=r(6709);function O(n,a){if(1&n&&(t.ynx(0,11),t.TgZ(1,"mat-checkbox",12)(2,"label",13),t._uU(3),t.qZA()(),t.BQk()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("formControlName",e.id.toString()),t.xp6(2),t.hij(" ",e.label," ")}}function Y(n,a){if(1&n&&(t.ynx(0,11),t.TgZ(1,"mat-checkbox",14)(2,"label",13),t._uU(3),t.qZA()(),t.BQk()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("formControlName",e.id.toString())("labelPosition",e.labelPosition)("checked",e.checked),t.xp6(2),t.hij(" ",e.label," ")}}let I=(()=>{class n{constructor(e,o,i,l,m,_){this.constant=e,this.fb=o,this.userRightsService=i,this.snackBar=l,this.dialogRef=m,this.data=_,this.dialog_title="User Rights",this.panelOpenState=!1,this.background=void 0,this.objUserRights={},this.userId=0,this.companyId=0,this.masterMenu=[],this.rateMenu=[],this.transactionMenu=[],this.formuserRight=this.fb.group({}),this.companyId=Number(this.constant.getData("CompanyId")),this.userId=Number(this.constant.getData("userId")),this.initializeFormControls()}initializeFormControls(){for(const e of this.masterMenu){const o=this.fb.control("true"===e.checked);this.formuserRight?.addControl(e.id.toString(),o)}for(const e of this.rateMenu){const o=this.fb.control("true"===e.checked);this.formuserRight?.addControl(e.id.toString(),o)}}saveUserrights(){var e=this;return(0,d.Z)(function*(){const o=Object.keys(e.formuserRight?.value).filter(l=>e.formuserRight?.controls[l].value);e.objUserRights.companyId=e.companyId,e.objUserRights.menuIds=o.toString(),e.objUserRights.userId=e.userId;try{var i=yield e.userRightsService.addUserRights(e.objUserRights);e.snackBar.open(i.message,"close",!0===i.is_successful?{duration:2e3,panelClass:["success-snack-bar"],verticalPosition:"top"}:{duration:2e3,panelClass:["error-snack-bar"],verticalPosition:"top"})}catch{e.snackBar.open("Oops Something went wrong","close",{duration:2e3,panelClass:["error-snack-bar"],verticalPosition:"top"})}finally{e.dialogRef.close()}})()}cancel(){this.dialogRef.close()}ngOnInit(){this.background=this.background?void 0:"primary",this.getAllUserRightsMenu()}getAllUserRightsMenu(){var e=this;return(0,d.Z)(function*(){try{var o=yield e.userRightsService.getAllUserRightsMenu(e.data.userId);e.masterMenu=o.data.masterMenu,e.rateMenu=o.data.rateMenu,console.log("Master Menu Is",e.masterMenu),e.initializeFormControls()}catch{e.snackBar.open(o.message,"close",{duration:2e3,panelClass:["error-snack-bar"],verticalPosition:"top"})}})()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.s),t.Y36(c.qu),t.Y36(y),t.Y36(Z.ux),t.Y36(h.so),t.Y36(h.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-user-right-form"]],decls:28,vars:3,consts:[[3,"formGroup"],[1,"example-card"],[1,"example-header","mt-2"],[1,"example-title"],[1,"example-icon"],[1,"labelHeader"],[1,"checkbox-row","m-2"],["class","checkbox-container",4,"ngFor","ngForOf"],[1,"m-2"],["mat-raised-button","","color","primary",1,"example-button",3,"click"],["mat-raised-button","","color","warn",1,"example-button",3,"click"],[1,"checkbox-container"],["color","primary",1,"mat-checkbox",3,"formControlName"],[1,"checkbox-label"],["color","primary",1,"mat-checkbox",3,"formControlName","labelPosition","checked"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0)(1,"div")(2,"mat-card",1)(3,"mat-card-header",2)(4,"div",3)(5,"mat-icon",4),t._uU(6,"supervisor_account"),t.qZA(),t._uU(7," User Rights "),t.qZA()(),t.TgZ(8,"mat-card-content")(9,"mat-list")(10,"mat-list-item")(11,"label",5),t._uU(12," Master"),t.qZA()(),t._UZ(13,"mat-divider"),t.TgZ(14,"div",6),t.YNc(15,O,4,2,"ng-container",7),t.qZA(),t.TgZ(16,"mat-list-item")(17,"label",5),t._uU(18,"Rate"),t.qZA()(),t._UZ(19,"mat-divider"),t.TgZ(20,"div",6),t.YNc(21,Y,4,4,"ng-container",7),t.qZA()()(),t.TgZ(22,"mat-card-actions")(23,"div",8)(24,"button",9),t.NdJ("click",function(){return o.saveUserrights()}),t._uU(25,"Save"),t.qZA(),t.TgZ(26,"button",10),t.NdJ("click",function(){return o.cancel()}),t._uU(27,"Cancel"),t.qZA()()()()()()),2&e&&(t.Q6J("formGroup",o.formuserRight),t.xp6(15),t.Q6J("ngForOf",o.masterMenu),t.xp6(6),t.Q6J("ngForOf",o.rateMenu))},dependencies:[x.i$,x.Tg,T.d,g.a8,g.hq,g.dn,g.dk,u.sg,C.Hw,U.lW,c._Y,c.JJ,c.JL,c.sg,c.u,M.oG],styles:[".example-tree-node[_ngcontent-%COMP%]{display:flex;align-items:center}.checkbox-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.mat-checkbox[_ngcontent-%COMP%]{margin-right:20px;margin-bottom:10px}.checkbox-label[_ngcontent-%COMP%]{color:gray!important;font-size:small;font-family:Verdana,Geneva,Tahoma,sans-serif;font-weight:700}.checkbox-container[_ngcontent-%COMP%]{flex:0 0 20%;padding:5px;box-sizing:border-box}@media (max-width: 767px){.checkbox-container[_ngcontent-%COMP%]{flex:0 0 50%}}@media (max-width: 479px){.checkbox-container[_ngcontent-%COMP%]{flex:0 0 100%}}.checkbox-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:flex-start;margin-left:-20px}.checkbox-container[_ngcontent-%COMP%]{flex:0 0 20%;padding:5px}.mat-divider[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px;border-top-width:2px;border-top-color:#d3d3d3}.custom-divider[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px;border-top-width:2px;border-top-color:#3f51b5}.mat-list-item[_ngcontent-%COMP%], .custom-list-item[_ngcontent-%COMP%]{color:#3f51b5;font-weight:700;font-size:larger}.example-card[_ngcontent-%COMP%]{width:100%;margin:0 auto;padding:24px;border-radius:8px;box-shadow:0 2px 4px #0000001a}.example-header[_ngcontent-%COMP%]{padding-bottom:8px;border-bottom:1px solid #ccc;margin-bottom:16px;display:flex;align-items:center}.example-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;display:flex;align-items:center}.example-icon[_ngcontent-%COMP%]{margin-right:8px}.example-card-content[_ngcontent-%COMP%]{margin-bottom:24px}.example-button[_ngcontent-%COMP%]{margin-right:8px}.example-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.labelHeader[_ngcontent-%COMP%]{font-weight:bolder}"]}),n})();var S=r(2620),A=r(4144),D=r(9549);function F(n,a){1&n&&(t.TgZ(0,"mat-header-cell",23),t._uU(1," Full Name "),t.qZA())}function j(n,a){if(1&n&&(t.TgZ(0,"mat-cell",24),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",e.fullName," ")}}function w(n,a){1&n&&(t.TgZ(0,"mat-header-cell",23),t._uU(1," Contact No "),t.qZA())}function Q(n,a){if(1&n&&(t.TgZ(0,"mat-cell",24),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",e.contactNo," ")}}function B(n,a){1&n&&(t.TgZ(0,"mat-header-cell",23),t._uU(1," Email "),t.qZA())}function J(n,a){if(1&n&&(t.TgZ(0,"mat-cell",24),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",e.email," ")}}function z(n,a){1&n&&(t.TgZ(0,"mat-header-cell",23),t._uU(1," BMC "),t.qZA())}function G(n,a){if(1&n&&(t.TgZ(0,"mat-cell",24),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",e.center," ")}}function $(n,a){1&n&&(t.TgZ(0,"mat-header-cell",23),t._uU(1," MPP "),t.qZA())}function H(n,a){if(1&n&&(t.TgZ(0,"mat-cell",24),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.hij(" ",e.society," ")}}function L(n,a){1&n&&(t.TgZ(0,"mat-header-cell",23),t._uU(1," Is Collection User "),t.qZA())}const N=function(n,a){return{greenCard:n,redCard:a}};function W(n,a){if(1&n&&(t.TgZ(0,"mat-cell",24)(1,"span",25),t._uU(2),t.qZA()()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("ngClass",t.WLB(2,N,e.isCollectionUser,!e.isCollectionUser)),t.xp6(1),t.hij(" ",e.isCollectionUser," ")}}function q(n,a){1&n&&(t.TgZ(0,"mat-header-cell",23),t._uU(1," Active "),t.qZA())}function E(n,a){if(1&n&&(t.TgZ(0,"mat-cell",24)(1,"span",25),t._uU(2),t.qZA()()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("ngClass",t.WLB(2,N,e.isActive,!e.isActive)),t.xp6(1),t.hij(" ",e.isActive," ")}}function X(n,a){1&n&&(t.TgZ(0,"mat-header-cell",26),t._uU(1," Action "),t.qZA())}function K(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-cell",26)(1,"a",27),t.NdJ("click",function(){const l=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.open_userRights_form("getUserById",l.userId))}),t.TgZ(2,"mat-icon",28),t._uU(3,"edit"),t.qZA()()()}}function V(n,a){1&n&&t._UZ(0,"tr",29)}function tt(n,a){1&n&&t._UZ(0,"tr",30)}const et=function(){return[10,20,50]};let nt=(()=>{class n{constructor(e,o,i,l,m,_){this.userServices=e,this.constant=o,this.fb=i,this.userRightsService=l,this.snackBar=m,this.dialog=_,this._displayColumns=["fullName","contactNo","email","center","society","isCollectionUser","isActive","actions"],this.dialog_title="User Rights",this.panelOpenState=!1,this.background=void 0,this.objUserRights={},this.userId=0,this.companyId=0,this.companyId=Number(this.constant.getData("CompanyId")),this.userId=Number(this.constant.getData("userId"))}getAllUser(){var e=this;return(0,d.Z)(function*(){var o=yield e.userServices.getAllUser(e.companyId);e._userTableDataSource=new s.by(o.data),e._userTableDataSource.paginator=e.paginator,e._userTableDataSource.sort=e.sort})()}ngOnInit(){this.background=this.background?void 0:"primary",this.getAllUser()}applyFilter(e){this._userTableDataSource.filter=e.target.value.trim().toLowerCase()}open_userRights_form(e,o){const i=new h.vA;i.disableClose=!0,i.autoFocus=!0,i.closeOnNavigation=!0,i.maxHeight="100%",i.maxWidth="100%",i.width="1000px",i.height="fit-content",i.data={action:e,userId:o},this.dialog.open(I,i).afterClosed().subscribe(m=>{this.getAllUser()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(S.K),t.Y36(f.s),t.Y36(c.qu),t.Y36(y),t.Y36(Z.ux),t.Y36(h.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-user-right"]],viewQuery:function(e,o){if(1&e&&(t.Gf(P.YE,7),t.Gf(p.NW,7)),2&e){let i;t.iGM(i=t.CRH())&&(o.sort=i.first),t.iGM(i=t.CRH())&&(o.paginator=i.first)}},decls:38,vars:6,consts:[[1,"card"],[1,"card-header","h4"],[1,"card-body"],[1,"row"],[1,"col-lg-4","col-sm-6"],["matInput","","placeholder","Filter",3,"keyup"],[1,"col-12","mat-table-container"],["matSort","",1,"table-width","table-bordered",3,"dataSource"],["matColumnDef","fullName"],["mat-sort-header","","class","col-lg-2",4,"matHeaderCellDef"],["class","col-lg-2",4,"matCellDef"],["matColumnDef","contactNo"],["matColumnDef","email"],["matColumnDef","center"],["matColumnDef","society"],["matColumnDef","isCollectionUser"],["matColumnDef","isActive"],["matColumnDef","actions"],["class","col-lg-1",4,"matHeaderCellDef"],["class","col-lg-1",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["mat-sort-header","",1,"col-lg-2"],[1,"col-lg-2"],[3,"ngClass"],[1,"col-lg-1"],["mat-icon-button","",3,"click"],[2,"color","#003b9a"],["mat-header-row",""],["mat-row","",1,"example-element-row"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"mat-form-field")(7,"input",5),t.NdJ("keyup",function(l){return o.applyFilter(l)}),t.qZA()()()(),t.TgZ(8,"div",3)(9,"div",6)(10,"mat-table",7),t.ynx(11,8),t.YNc(12,F,2,0,"mat-header-cell",9),t.YNc(13,j,2,1,"mat-cell",10),t.BQk(),t.ynx(14,11),t.YNc(15,w,2,0,"mat-header-cell",9),t.YNc(16,Q,2,1,"mat-cell",10),t.BQk(),t.ynx(17,12),t.YNc(18,B,2,0,"mat-header-cell",9),t.YNc(19,J,2,1,"mat-cell",10),t.BQk(),t.ynx(20,13),t.YNc(21,z,2,0,"mat-header-cell",9),t.YNc(22,G,2,1,"mat-cell",10),t.BQk(),t.ynx(23,14),t.YNc(24,$,2,0,"mat-header-cell",9),t.YNc(25,H,2,1,"mat-cell",10),t.BQk(),t.ynx(26,15),t.YNc(27,L,2,0,"mat-header-cell",9),t.YNc(28,W,3,5,"mat-cell",10),t.BQk(),t.ynx(29,16),t.YNc(30,q,2,0,"mat-header-cell",9),t.YNc(31,E,3,5,"mat-cell",10),t.BQk(),t.ynx(32,17),t.YNc(33,X,2,0,"mat-header-cell",18),t.YNc(34,K,4,0,"mat-cell",19),t.BQk(),t.YNc(35,V,1,0,"tr",20),t.YNc(36,tt,1,0,"tr",21),t.qZA(),t._UZ(37,"mat-paginator",22),t.qZA()()()()),2&e&&(t.xp6(2),t.hij(" ",o.dialog_title," "),t.xp6(8),t.Q6J("dataSource",o._userTableDataSource),t.xp6(25),t.Q6J("matHeaderRowDef",o._displayColumns),t.xp6(1),t.Q6J("matRowDefColumns",o._displayColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(5,et)))},dependencies:[p.NW,u.mk,C.Hw,U.o6,A.Nt,D.KE,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk],styles:[".mat-column-isActive[_ngcontent-%COMP%], .mat-column-isCollectionUser[_ngcontent-%COMP%], .mat-column-companyId[_ngcontent-%COMP%], .mat-column-gstNo[_ngcontent-%COMP%], .mat-column-email[_ngcontent-%COMP%], .mat-column-center[_ngcontent-%COMP%], .mat-column-society[_ngcontent-%COMP%], .mat-column-fullName[_ngcontent-%COMP%]{text-align:left;justify-content:center;align-self:stretch;padding-left:5px;padding-right:5px;border-right:1px solid rgba(0,0,0,.12)}.mat-column-contactNo[_ngcontent-%COMP%]{text-align:right;justify-content:flex-start!important;align-self:stretch;padding-left:5px;padding-right:5px;word-break:break-word;border-right:1px solid rgba(0,0,0,.12)}"]}),n})();var ot=r(3870),at=r(7851),it=r(7084),rt=r(3848);const lt=[{path:"",component:nt,canActivate:[ot.a]}];let st=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.TU,x.ie,T.t,g.QW,rt.Nh,u.ez,at.nZ,C.Ps,U.ot,it.To,c.UX,A.c,M.p9,s.p0,k.Bz.forChild(lt)]}),n})()}}]);