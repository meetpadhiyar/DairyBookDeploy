"use strict";(self.webpackChunkLog=self.webpackChunkLog||[]).push([[247],{8247:(bt,A,l)=>{l.r(A),l.d(A,{PlantModule:()=>Ct});var g=l(6895),M=l(3870),c=l(5938),v=l(8739),C=l(6308),r=l(671),i=l(4006),t=l(4650),u=l(5861),N=l(529),b=l(3724);const h={headers:new N.WM({"Content-Type":"application/json"})};let P=(()=>{class a{constructor(e,n){this.http=e,this.constant=n}fetchPlantDropDown(e){var n=this;return(0,u.Z)(function*(){const s=n.constant.fetchPlantDropDown();return yield n.http.post(s,e,h).toPromise()})()}insertPlant(e){var n=this;return(0,u.Z)(function*(){const s=n.constant.insertPlant();return yield n.http.post(s,e,h).toPromise()})()}getplant(e){var n=this;return(0,u.Z)(function*(){const s=n.constant.getplant();return yield n.http.post(s,e,h).toPromise()})()}updatePlant(e){var n=this;return(0,u.Z)(function*(){const s=n.constant.updatePlant();return yield n.http.post(s,e,h).toPromise()})()}getPlantById(e){var n=this;return(0,u.Z)(function*(){const s=n.constant.getPlantById();return yield n.http.post(s,e,h).toPromise()})()}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(N.eN),t.LFG(b.s))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var I=l(7009),p=l(9549),x=l(4385),_=l(3238),d=l(3546),f=l(4859),Z=l(7392),U=l(6709),T=l(4144);function D(a,o){if(1&a&&(t.TgZ(0,"mat-option",27),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e.companyId),t.xp6(1),t.hij(" ",e.company," ")}}function F(a,o){if(1&a&&(t.TgZ(0,"mat-option",27),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e.countryId),t.xp6(1),t.hij(" ",e.country," ")}}function L(a,o){if(1&a&&(t.TgZ(0,"mat-option",27),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e.stateId),t.xp6(1),t.hij(" ",e.state," ")}}let Y=(()=>{class a{constructor(e,n,s,m,y,j){this.plantService=e,this.fb=n,this.constant=s,this.snackBar=m,this.dialogRef=y,this.data=j,this.formTitle="Plant",this.plantObj={},this.stateList=[],this.statFilterList=[],this.countryList=[],this.countryFilterList=[],this.companyList=[],this.companyFilterList=[],this.btnText="Save",this.action="",this.companyId=0,this.companyId=Number(this.constant.getData("CompanyId")),this.fromplantMaster=this.fb.group({plantName:["",i.kI.required],companyId:[this.companyId,i.kI.required],countryId:[1,i.kI.required],stateId:["",i.kI.required],plantCode:["",i.kI.required],address1:[""],address2:[""],emailAddress:["",i.kI.email],phoneNumber:["",[i.kI.required,i.kI.pattern("^[0-9]*$"),i.kI.minLength(10)]],gstNumber:[""],isActive:[!0]}),this.fromplantMaster.get("countryId")?.valueChanges.subscribe(Tt=>{const Zt=this.fromplantMaster?.controls.countryId?.value;this.statFilterList=this.stateList.filter(yt=>yt.countryId==Zt)}),this.action=j.action}ngOnInit(){this.fetchDropDown(),this.getPlantById()}filterDropdowns(e){const n=this.fromplantMaster?.controls.countryId?.value;return this.statFilterList=this.stateList.filter(s=>s.state.toLowerCase().indexOf(e.toLowerCase())>=0&&s.countryId==n)}validateNo(e){const n=e.which?e.which:e.keyCode;return!(n>31&&(n<48||n>57))}on_cancel_button(){this.dialogRef.close()}getPlantById(){"addCompany"===this.action?(this.btnText="Save",this.plantObj.plantId=this.data.plantId):(this.btnText="update",this.plantObj.plantId=this.data.plantId,this.plantService.getPlantById(this.plantObj).then(e=>{this.fromplantMaster.controls.plantName.setValue(e.data[0].plantName),this.fromplantMaster.controls.address1.setValue(e.data[0].address1),this.fromplantMaster.controls.address2.setValue(e.data[0].address2),this.fromplantMaster.controls.countryId.setValue(e.data[0].countryId),this.fromplantMaster.controls.stateId.setValue(e.data[0].stateId),this.fromplantMaster.controls.emailAddress.setValue(e.data[0].emailAddress),this.fromplantMaster.controls.phoneNumber.setValue(e.data[0].phoneNumber),this.fromplantMaster.controls.plantCode.setValue(e.data[0].plantCode),this.fromplantMaster.controls.gstNumber.setValue(e.data[0].gstNumber),this.fromplantMaster.controls.isActive.setValue(e.data[0].isActive),this.fromplantMaster.controls.companyId.setValue(e.data[0].companyId)}))}submit(){this.plantObj.plantName=this.fromplantMaster.controls.plantName.value,this.plantObj.companyId=Number(this.constant.getData("CompanyId")),this.plantObj.address1=this.fromplantMaster.controls.address1.value,this.plantObj.address2=this.fromplantMaster.controls.address2.value,this.plantObj.city="",this.plantObj.pincode="",this.plantObj.countryId=this.fromplantMaster.controls.countryId.value,this.plantObj.stateId=this.fromplantMaster.controls.stateId.value,this.plantObj.districtId=0,this.plantObj.subDistrictId=0,this.plantObj.emailAddress=this.fromplantMaster.controls.emailAddress.value,this.plantObj.phoneNumber=this.fromplantMaster.controls.phoneNumber.value,this.plantObj.plantCode=this.fromplantMaster.controls.plantCode.value,this.plantObj.gstNumber=this.fromplantMaster.controls.gstNumber.value,this.plantObj.isActive=this.fromplantMaster.controls.isActive.value,this.plantObj.userId=Number(this.constant.getData("userId")),this.plantObj.action="addCompany"===this.action?"insertPlant":"updatePlant",this.plantService.insertPlant(this.plantObj).then(e=>{!0===e.is_successful?(this.dialogRef.close(),this.snackBar.open(e.message,"close",{duration:2e3,panelClass:["success-snack-bar"],verticalPosition:"top"})):this.snackBar.open(e.message,"close",{duration:2e3,panelClass:["error-snack-bar"],verticalPosition:"top"})})}fetchDropDown(){this.plantObj.companyId=Number(this.constant.getData("CompanyId")),this.plantService.fetchPlantDropDown(this.plantObj).then(e=>{this.stateList=e.data.state,this.statFilterList=this.stateList,this.countryList=e.data.country,this.countryFilterList=this.countryList,this.companyList=e.data.company})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(P),t.Y36(i.qu),t.Y36(b.s),t.Y36(I.ux),t.Y36(c.so),t.Y36(c.WI))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-plant-form"]],decls:74,vars:7,consts:[[3,"formGroup"],[2,"height","450px","overflow-y","auto"],[1,"example-header","mt-2"],[1,"example-title"],[1,"example-icon"],[1,"row"],[1,"col-lg-12","col-sm-12"],["appearance","fill"],["matInput","","placeholder","plant","formControlName","plantName"],[1,"col-lg-3","col-sm-12"],["matInput","","placeholder","Plant Code","formControlName","plantCode"],["formControlName","companyId","placeholder"," company ","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","countryId","placeholder"," country ","required",""],["formControlName","stateId","placeholder"," State ","required",""],["placeholder","Search State","matInput","","required","",1,"align-element",3,"input"],[1,"col-lg-6","col-sm-12","example-form"],["matInput","","placeholder","Address 1","formControlName","address1"],["matInput","","placeholder","Address 2","formControlName","address2"],["matInput","","placeholder","Email Address","formControlName","emailAddress"],["matInput","","placeholder","Phone Number","formControlName","phoneNumber","maxlength","10","minlength","10",3,"keypress"],["matInput","","placeholder","GST","formControlName","gstNumber"],["color","primary","formControlName","isActive"],[1,"col-lg-3","col-sm-6"],[1,"mt-2"],["mat-flat-button","","color","primary",1,"example-button",3,"disabled","click"],["mat-flat-button","","color","warn",1,"example-button",3,"click"],[3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0)(1,"mat-card",1)(2,"mat-card-header",2)(3,"div",3)(4,"mat-icon",4),t._uU(5,"business"),t.qZA(),t._uU(6),t.qZA()(),t.TgZ(7,"mat-card-content")(8,"div",5)(9,"div",6)(10,"mat-form-field",7)(11,"mat-label"),t._uU(12,"plant"),t.qZA(),t._UZ(13,"input",8),t.qZA()(),t.TgZ(14,"div",9)(15,"mat-form-field",7)(16,"mat-label"),t._uU(17,"plant code"),t.qZA(),t._UZ(18,"input",10),t.qZA()(),t.TgZ(19,"div",9)(20,"mat-form-field")(21,"mat-select",11),t.YNc(22,D,2,2,"mat-option",12),t.qZA()()(),t.TgZ(23,"div",9)(24,"mat-form-field")(25,"mat-select",13),t.YNc(26,F,2,2,"mat-option",12),t.qZA()()(),t.TgZ(27,"div",9)(28,"mat-form-field")(29,"mat-select",14)(30,"mat-form-field")(31,"input",15),t.NdJ("input",function(m){return n.filterDropdowns(m.target.value)}),t.qZA()(),t.YNc(32,L,2,2,"mat-option",12),t.qZA()()(),t.TgZ(33,"div",16)(34,"mat-form-field",7)(35,"mat-label"),t._uU(36,"Address 1"),t.qZA(),t._UZ(37,"input",17),t.qZA()(),t.TgZ(38,"div",16)(39,"mat-form-field",7)(40,"mat-label"),t._uU(41,"Address 2"),t.qZA(),t._UZ(42,"input",18),t.qZA()(),t.TgZ(43,"div",9)(44,"mat-form-field",7)(45,"mat-label"),t._uU(46,"Email Address"),t.qZA(),t._UZ(47,"input",19),t.TgZ(48,"mat-error"),t._uU(49,"Enter Valid Email Address"),t.qZA()()(),t.TgZ(50,"div",9)(51,"mat-form-field",7)(52,"mat-label"),t._uU(53,"Phone Number"),t.qZA(),t.TgZ(54,"input",20),t.NdJ("keypress",function(m){return n.validateNo(m)}),t.qZA(),t.TgZ(55,"mat-error"),t._uU(56,"Enter Valid Mobile Number"),t.qZA()()(),t.TgZ(57,"div",9)(58,"mat-form-field",7)(59,"mat-label"),t._uU(60,"GST"),t.qZA(),t._UZ(61,"input",21),t.TgZ(62,"mat-error"),t._uU(63,"Enter Valid Mobile Number"),t.qZA()()(),t.TgZ(64,"div",9)(65,"mat-checkbox",22),t._uU(66,"Active"),t.qZA()(),t._UZ(67,"div",23)(68,"div",23),t.qZA()(),t.TgZ(69,"mat-card-actions",24)(70,"button",25),t.NdJ("click",function(){return n.submit()}),t._uU(71),t.qZA(),t.TgZ(72,"button",26),t.NdJ("click",function(){return n.on_cancel_button()}),t._uU(73,"Cancel"),t.qZA()()()()),2&e&&(t.Q6J("formGroup",n.fromplantMaster),t.xp6(6),t.hij(" ",n.formTitle," "),t.xp6(16),t.Q6J("ngForOf",n.companyList),t.xp6(4),t.Q6J("ngForOf",n.countryFilterList),t.xp6(6),t.Q6J("ngForOf",n.statFilterList),t.xp6(38),t.Q6J("disabled",n.fromplantMaster.invalid),t.xp6(1),t.Oqu(n.btnText))},dependencies:[g.sg,p.KE,p.hX,p.TO,x.gD,_.ey,i._Y,i.Fj,i.JJ,i.JL,i.Q7,i.wO,i.nD,d.a8,d.hq,d.dn,d.dk,f.lW,Z.Hw,i.sg,i.u,U.oG,T.Nt]}),a})();function S(a,o){1&a&&(t.TgZ(0,"mat-header-cell",25),t._uU(1," Plant Code"),t.qZA())}function J(a,o){if(1&a&&(t.TgZ(0,"mat-cell",26),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.xp6(1),t.hij(" ",e.plantCode," ")}}function Q(a,o){1&a&&(t.TgZ(0,"mat-header-cell",25),t._uU(1," Plant "),t.qZA())}function q(a,o){if(1&a&&(t.TgZ(0,"mat-cell",26),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.xp6(1),t.hij(" ",e.plantName," ")}}function B(a,o){1&a&&(t.TgZ(0,"mat-header-cell",25),t._uU(1," State "),t.qZA())}function V(a,o){if(1&a&&(t.TgZ(0,"mat-cell",26),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.xp6(1),t.hij(" ",e.state," ")}}function k(a,o){1&a&&(t.TgZ(0,"mat-header-cell",25),t._uU(1," Email Address "),t.qZA())}function G(a,o){if(1&a&&(t.TgZ(0,"mat-cell",26),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.xp6(1),t.hij(" ",e.emailAddress," ")}}function R(a,o){1&a&&(t.TgZ(0,"mat-header-cell",25),t._uU(1," Phone Number"),t.qZA())}function E(a,o){if(1&a&&(t.TgZ(0,"mat-cell",26),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.xp6(1),t.hij(" ",e.phoneNumber," ")}}function w(a,o){1&a&&(t.TgZ(0,"mat-header-cell",25),t._uU(1," Active"),t.qZA())}const H=function(a,o){return{greenCard:a,redCard:o}};function $(a,o){if(1&a&&(t.TgZ(0,"mat-cell",26)(1,"span",27),t._uU(2),t.qZA()()),2&a){const e=o.$implicit;t.xp6(1),t.Q6J("ngClass",t.WLB(2,H,e.isActive,!e.isActive)),t.xp6(1),t.hij(" ",e.isActive," ")}}function W(a,o){1&a&&(t.TgZ(0,"mat-header-cell",28),t._uU(1," Action "),t.qZA())}function z(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"mat-cell",28)(1,"a",29),t.NdJ("click",function(){const m=t.CHM(e).$implicit,y=t.oxw();return t.KtG(y.open_plant_Form("getPlantById",m.plantId))}),t.TgZ(2,"mat-icon",30),t._uU(3,"edit"),t.qZA()()()}}function X(a,o){1&a&&t._UZ(0,"tr",31)}function K(a,o){1&a&&t._UZ(0,"tr",32)}const tt=function(){return[10,20,50]};let et=(()=>{class a{constructor(e,n,s){this.plantServices=e,this.constant=n,this.dialog=s,this.dialog_title="Plant",this.objplant={},this.displayColumn=["plantCode","plantName","state","emailAddress","phoneNumber","isActive","actions"]}ngOnInit(){this.getplant()}open_plant_Form(e,n){const s=new c.vA;s.disableClose=!0,s.autoFocus=!0,s.closeOnNavigation=!0,s.maxHeight="100%",s.maxWidth="100%",s.width="1000px",s.height="fit-content",s.data={action:e,plantId:n},this.dialog.open(Y,s).afterClosed().subscribe(y=>{this.getplant()})}getplant(){this.objplant.companyId=Number(this.constant.getData("CompanyId")),this.plantServices.getplant(this.objplant).then(e=>{this._plantTableDataSource=new r.by(e.data),this._plantTableDataSource.paginator=this.paginator,this._plantTableDataSource.sort=this.sort})}applyFilter(e){this._plantTableDataSource.filter=e.target.value.trim().toLowerCase()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(P),t.Y36(b.s),t.Y36(c.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-plant"]],viewQuery:function(e,n){if(1&e&&(t.Gf(C.YE,7),t.Gf(v.NW,7)),2&e){let s;t.iGM(s=t.CRH())&&(n.sort=s.first),t.iGM(s=t.CRH())&&(n.paginator=s.first)}},decls:39,vars:6,consts:[[1,"card"],[1,"card-header","h4"],[1,"card-body"],[1,"row"],[1,"col-lg-4","col-sm-6"],["matInput","","placeholder","Filter",3,"keyup"],[1,"col-lg-6","col-sm-6"],["mat-icon-button","",1,"round-button",3,"click"],[1,"icon-white"],[1,"col-12","mat-table-container"],["matSort","",1,"table-width","table-bordered",3,"dataSource"],["matColumnDef","plantCode"],["mat-sort-header","","class","col-lg-2",4,"matHeaderCellDef"],["class","col-lg-2",4,"matCellDef"],["matColumnDef","plantName"],["matColumnDef","state"],["matColumnDef","emailAddress"],["matColumnDef","phoneNumber"],["matColumnDef","isActive"],["matColumnDef","actions"],["class","col-lg-1",4,"matHeaderCellDef"],["class","col-lg-1",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["mat-sort-header","",1,"col-lg-2"],[1,"col-lg-2"],[3,"ngClass"],[1,"col-lg-1"],["mat-icon-button","",3,"click"],[2,"color","#003b9a"],["mat-header-row",""],["mat-row","",1,"example-element-row"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"mat-form-field")(7,"input",5),t.NdJ("keyup",function(m){return n.applyFilter(m)}),t.qZA()()(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return n.open_plant_Form("addCompany",0)}),t.TgZ(10,"mat-icon",8),t._uU(11,"add"),t.qZA()()()(),t.TgZ(12,"div",3)(13,"div",9)(14,"mat-table",10),t.ynx(15,11),t.YNc(16,S,2,0,"mat-header-cell",12),t.YNc(17,J,2,1,"mat-cell",13),t.BQk(),t.ynx(18,14),t.YNc(19,Q,2,0,"mat-header-cell",12),t.YNc(20,q,2,1,"mat-cell",13),t.BQk(),t.ynx(21,15),t.YNc(22,B,2,0,"mat-header-cell",12),t.YNc(23,V,2,1,"mat-cell",13),t.BQk(),t.ynx(24,16),t.YNc(25,k,2,0,"mat-header-cell",12),t.YNc(26,G,2,1,"mat-cell",13),t.BQk(),t.ynx(27,17),t.YNc(28,R,2,0,"mat-header-cell",12),t.YNc(29,E,2,1,"mat-cell",13),t.BQk(),t.ynx(30,18),t.YNc(31,w,2,0,"mat-header-cell",12),t.YNc(32,$,3,5,"mat-cell",13),t.BQk(),t.ynx(33,19),t.YNc(34,W,2,0,"mat-header-cell",20),t.YNc(35,z,4,0,"mat-cell",21),t.BQk(),t.YNc(36,X,1,0,"tr",22),t.YNc(37,K,1,0,"tr",23),t.qZA(),t._UZ(38,"mat-paginator",24),t.qZA()()()()),2&e&&(t.xp6(2),t.hij(" ",n.dialog_title," "),t.xp6(12),t.Q6J("dataSource",n._plantTableDataSource),t.xp6(22),t.Q6J("matHeaderRowDef",n.displayColumn),t.xp6(1),t.Q6J("matRowDefColumns",n.displayColumn),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(5,tt)))},dependencies:[g.mk,p.KE,f.o6,f.RK,Z.Hw,v.NW,C.YE,C.nU,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,T.Nt],styles:[".mat-column-isActive[_ngcontent-%COMP%], .mat-column-actions[_ngcontent-%COMP%], .mat-column-plantName[_ngcontent-%COMP%], .mat-column-state[_ngcontent-%COMP%], .mat-column-emailAddress[_ngcontent-%COMP%]{text-align:left;justify-content:center;align-self:stretch;padding-left:5px;padding-right:5px;border-right:1px solid rgba(0,0,0,.12)}.mat-column-plantCode[_ngcontent-%COMP%], .mat-column-phoneNumber[_ngcontent-%COMP%]{text-align:right;justify-content:center;align-self:stretch;padding-left:5px;padding-right:5px;border-right:1px solid rgba(0,0,0,.12)}"]}),a})();var O=l(9299),at=l(1366),nt=l(9602),ot=l(2673),lt=l(8242),st=l(811),it=l(7331),rt=l(4850),mt=l(7084),ct=l(782),pt=l(6338),dt=l(3162),ut=l(1572),ht=l(6257),ft=l(3848),gt=l(266);const vt=[{path:"",component:et,canActivate:[M.a]}];let Ct=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[g.ez,x.LD,i.u5,p.lN,d.QW,rt.t,mt.To,ct.N6,pt.ie,f.ot,st.vV,ot.g,it.Hi,Z.Ps,ut.Cq,dt.Cv,_.si,lt._r,c.Is,I.ZX,gt.AV,v.TU,C.JX,r.p0,i.u5,ht.T5,ft.Nh,g.ez,d.QW,c.Is,p.lN,at.IJ,i.u5,nt.FA,i.UX,Z.Ps,r.p0,v.TU,U.p9,T.c,f.ot,r.p0,O.Bz.forChild(vt),O.Bz]}),a})()}}]);