"use strict";(self.webpackChunkLog=self.webpackChunkLog||[]).push([[367],{2367:(Ce,I,c)=>{c.r(I),c.d(I,{CenterModule:()=>pe});var f=c(6895),m=c(5861),s=c(671),Z=c(8739),g=c(6308),p=c(5938),l=c(4006),e=c(4650);let N=(()=>{class n{validateNo(t){return!(t>31&&(t<48||t>57))}globalValidateNo(t){this.validateNo(t.keyCode)||t.preventDefault()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var y=c(3724),A=c(7009),F=c(529);const d={headers:new F.WM({"Content-Type":"application/json"})};let x=(()=>{class n{constructor(t,r){this.http=t,this.constant=r}getAllCenter(t){var r=this;return(0,m.Z)(function*(){const a=r.constant.getAllCenter();try{return yield r.http.post(a,t,d).toPromise()}catch(i){return Promise.reject(i)}})()}getCenterDropDown(t){var r=this;return(0,m.Z)(function*(){const a=r.constant.getCenterDropDown();try{return yield r.http.post(a,t,d).toPromise()}catch(i){return Promise.reject(i)}})()}addCenter(t){var r=this;return(0,m.Z)(function*(){const a=r.constant.addCenter();try{return console.log("url Is:",a),yield r.http.post(a,t,d).toPromise()}catch(i){return Promise.reject(i)}})()}updateCenter(t){var r=this;return(0,m.Z)(function*(){const a=r.constant.updateCenter();try{return yield r.http.post(a,t,d).toPromise()}catch(i){return Promise.reject(i)}})()}getCenterById(t){var r=this;return(0,m.Z)(function*(){const a=r.constant.getCenterById();try{const i=yield r.http.post(a,t,d).toPromise();return Promise.resolve(i)}catch(i){return Promise.reject(i)}})()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(F.eN),e.LFG(y.s))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var u=c(9549),P=c(4385),Y=c(3238),h=c(3546),C=c(4859),v=c(7392),q=c(6709),T=c(4144);function k(n,o){if(1&n&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.companyId),e.xp6(1),e.hij(" ",t.companyName," ")}}function B(n,o){if(1&n&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.plantId),e.xp6(1),e.hij(" ",t.plantName," ")}}function S(n,o){if(1&n&&(e.TgZ(0,"mat-option",23),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.mccId),e.xp6(1),e.hij(" ",t.mccName," ")}}function L(n,o){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Phone number cannot exceed 10 characters. "),e.qZA())}function J(n,o){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Phone number must be at least 10 characters. "),e.qZA())}let b=(()=>{class n{constructor(t,r,a,i,_,de,U){this.fb=t,this.constant=r,this.snackBar=a,this.dialogRef=i,this.validationService=_,this.centerServices=de,this.data=U,this.requestParameters={},this.companyId=0,this.userId=0,this.btnText="Save",this.action="",this.companyId=Number(this.constant.getData("CompanyId")),this.userId=Number(this.constant.getData("userId")),this.action=U.action,this.centerForm=this.fb.group({centerName:["",l.kI.required],centerCode:["",l.kI.required],companyId:[this.companyId,l.kI.required],plantId:["",l.kI.required],mccId:["",l.kI.required],address:[""],phoneNo:["",[l.kI.required,l.kI.maxLength(10),l.kI.minLength(10)]],isActive:[!0]}),this.centerForm.get("plantId")?.valueChanges.subscribe(ue=>{this.mccListFilter=this.mccList,this.mccListFilter=this.mccList.filter(he=>he.plantId===ue)})}ngOnInit(){this.getCenterDropDown(),"addCenter"!==this.data.action&&this.getCenterById()}getCenterById(){var t=this;return(0,m.Z)(function*(){t.btnText="addCenter"===t.action?"Save":"Update",t.requestParameters.centerId=t.data.centerId,t.requestParameters.action="getCenterById",console.log(t.requestParameters);var r=yield t.centerServices.getCenterById(t.requestParameters);t.centerForm.patchValue({centerName:r.data[0].center,centerCode:r.data[0].centerCode,companyId:r.data[0].companyId,plantId:r.data[0].plantId,mccId:r.data[0].mccId,address:r.data[0].address,phoneNo:r.data[0].phoneNo,isActive:r.data[0].isActive})})()}getCenterDropDown(){var t=this;return(0,m.Z)(function*(){t.requestParameters.companyId=t.companyId;var r=yield t.centerServices.getCenterDropDown(t.requestParameters);t.companyList=r.data.company,t.plantList=r.data.plant,t.plantListFilter=t.plantList,t.mccList=r.data.mcc})()}setValue(){this.requestParameters.action=0===this.data.centerId?"addCenter":"updateCenter",this.requestParameters.centerId=this.data.centerId,this.requestParameters.center=this.centerForm.get("centerName").value,this.requestParameters.centerCode=this.centerForm.get("centerCode").value,this.requestParameters.plantId=this.centerForm.get("plantId").value,this.requestParameters.mccId=this.centerForm.get("mccId").value,this.requestParameters.companyId=this.companyId,this.requestParameters.address=this.centerForm.get("address").value,this.requestParameters.phoneNo=this.centerForm.get("phoneNo").value,this.requestParameters.isActive=this.centerForm.get("isActive").value,this.requestParameters.uerId=this.userId}savecenter(){var t=this;return(0,m.Z)(function*(){try{let r;t.setValue(),r=0===t.data.centerId?yield t.centerServices.addCenter(t.requestParameters):yield t.centerServices.updateCenter(t.requestParameters),t.snackBar.open(r.message,"close",!0===r.is_successful?{duration:2e3,panelClass:["success-snack-bar"],verticalPosition:"top"}:{duration:2e3,panelClass:["error-snack-bar"],verticalPosition:"top"})}catch{t.snackBar.open("Oops something went wrong","close",{duration:2e3,panelClass:["error-snack-bar"],verticalPosition:"top"})}finally{t.dialogRef.close()}})()}on_cancel_button(){this.dialogRef.close()}filterPlant(t){return this.plantListFilter=this.plantList.filter(r=>r.plantName.toLowerCase().indexOf(t.toLowerCase())>=0)}filterMcc(t){return this.mccListFilter=this.mccList.filter(r=>r.mccName.toLowerCase().indexOf(t.toLowerCase())>=0)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.qu),e.Y36(y.s),e.Y36(A.ux),e.Y36(p.so),e.Y36(N),e.Y36(x),e.Y36(p.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-center-form"]],features:[e._Bn([N])],decls:55,vars:8,consts:[[3,"formGroup"],[1,"example-card"],[1,"example-header","mt-2"],[1,"example-title"],[1,"example-icon"],[1,"row"],[1,"col-lg-6","col-sm-12"],["matInput","","placeholder","BMC","formControlName","centerName"],["matInput","","placeholder","BMC Code","formControlName","centerCode",3,"keypress"],["formControlName","companyId","placeholder"," Company ","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-lg-3","col-sm-6"],["formControlName","plantId","placeholder"," Plant ","required",""],["placeholder","Search Plant","matInput","","required","",1,"align-element",3,"input"],["formControlName","mccId","placeholder"," MCC ","required",""],["placeholder","Search MCC","matInput","","required","",1,"align-element",3,"input"],["matInput","","placeholder","Address","formControlName","address"],["matInput","","placeholder","PhoneNo","formControlName","phoneNo","maxlength","10",3,"keypress"],[4,"ngIf"],["color","primary","formControlName","isActive"],[1,"mt-2"],["mat-flat-button","","color","primary",1,"example-button",3,"disabled","click"],["mat-flat-button","","color","warn",1,"example-button",3,"click"],[3,"value"]],template:function(t,r){1&t&&(e.TgZ(0,"form",0)(1,"mat-card",1)(2,"mat-card-header",2)(3,"div",3)(4,"mat-icon",4),e._uU(5,"airplay icon"),e.qZA(),e._uU(6," BMC "),e.qZA()(),e.TgZ(7,"mat-card-content")(8,"div",5)(9,"div",6)(10,"mat-form-field")(11,"mat-label"),e._uU(12,"BMC"),e.qZA(),e._UZ(13,"input",7),e.qZA()(),e.TgZ(14,"div",6)(15,"mat-form-field")(16,"mat-label"),e._uU(17,"BMC Code"),e.qZA(),e.TgZ(18,"input",8),e.NdJ("keypress",function(i){return r.validationService.globalValidateNo(i)}),e.qZA()()(),e.TgZ(19,"div",6)(20,"mat-form-field")(21,"mat-select",9),e.YNc(22,k,2,2,"mat-option",10),e.qZA()()(),e.TgZ(23,"div",11)(24,"mat-form-field")(25,"mat-select",12)(26,"mat-form-field")(27,"input",13),e.NdJ("input",function(i){return r.filterPlant(i.target.value)}),e.qZA()(),e.YNc(28,B,2,2,"mat-option",10),e.qZA()()(),e.TgZ(29,"div",11)(30,"mat-form-field")(31,"mat-select",14)(32,"mat-form-field")(33,"input",15),e.NdJ("input",function(i){return r.filterMcc(i.target.value)}),e.qZA()(),e.YNc(34,S,2,2,"mat-option",10),e.qZA()()(),e.TgZ(35,"div",6)(36,"mat-form-field")(37,"mat-label"),e._uU(38," Address "),e.qZA(),e._UZ(39,"input",16),e.qZA()(),e.TgZ(40,"div",11)(41,"mat-form-field")(42,"mat-label"),e._uU(43," Phone No "),e.qZA(),e.TgZ(44,"input",17),e.NdJ("keypress",function(i){return r.validationService.globalValidateNo(i)}),e.qZA(),e.YNc(45,L,2,0,"mat-error",18),e.YNc(46,J,2,0,"mat-error",18),e.qZA()(),e.TgZ(47,"div",11)(48,"mat-checkbox",19),e._uU(49," isActive "),e.qZA()()()(),e.TgZ(50,"mat-card-actions",20)(51,"button",21),e.NdJ("click",function(){return r.savecenter()}),e._uU(52),e.qZA(),e.TgZ(53,"button",22),e.NdJ("click",function(){return r.on_cancel_button()}),e._uU(54,"Cancel"),e.qZA()()()()),2&t&&(e.Q6J("formGroup",r.centerForm),e.xp6(22),e.Q6J("ngForOf",r.companyList),e.xp6(6),e.Q6J("ngForOf",r.plantListFilter),e.xp6(6),e.Q6J("ngForOf",r.mccListFilter),e.xp6(11),e.Q6J("ngIf",r.centerForm.get("phoneNo").hasError("maxlength")),e.xp6(1),e.Q6J("ngIf",r.centerForm.get("phoneNo").hasError("minlength")),e.xp6(5),e.Q6J("disabled",r.centerForm.invalid),e.xp6(1),e.Oqu(r.btnText))},dependencies:[f.sg,f.O5,u.KE,u.hX,u.TO,P.gD,Y.ey,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.nD,h.a8,h.hq,h.dn,h.dk,C.lW,v.Hw,l.sg,l.u,q.oG,T.Nt]}),n})();function M(n,o){1&n&&(e.TgZ(0,"mat-header-cell",25),e._uU(1," BMC Code "),e.qZA())}function Q(n,o){if(1&n&&(e.TgZ(0,"mat-cell",26),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",t.centerCode," ")}}function O(n,o){1&n&&(e.TgZ(0,"mat-header-cell",25),e._uU(1," BMC "),e.qZA())}function w(n,o){if(1&n&&(e.TgZ(0,"mat-cell",26),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",t.center," ")}}function j(n,o){1&n&&(e.TgZ(0,"mat-header-cell",25),e._uU(1," Plant "),e.qZA())}function R(n,o){if(1&n&&(e.TgZ(0,"mat-cell",26),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",t.plant," ")}}function G(n,o){1&n&&(e.TgZ(0,"mat-header-cell",25),e._uU(1," MCC "),e.qZA())}function V(n,o){if(1&n&&(e.TgZ(0,"mat-cell",26),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",t.mcc," ")}}function H(n,o){1&n&&(e.TgZ(0,"mat-header-cell",25),e._uU(1," PhoneNo "),e.qZA())}function $(n,o){if(1&n&&(e.TgZ(0,"mat-cell",26),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",t.phoneNo," ")}}function W(n,o){1&n&&(e.TgZ(0,"mat-header-cell",25),e._uU(1," Active "),e.qZA())}const z=function(n,o){return{greenCard:n,redCard:o}};function E(n,o){if(1&n&&(e.TgZ(0,"mat-cell",26)(1,"span",27),e._uU(2),e.qZA()()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngClass",e.WLB(2,z,t.isActive,!t.isActive)),e.xp6(1),e.hij(" ",t.isActive," ")}}function X(n,o){1&n&&(e.TgZ(0,"mat-header-cell",28),e._uU(1," Action "),e.qZA())}function K(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-cell",28)(1,"a",29),e.NdJ("click",function(){const i=e.CHM(t).$implicit,_=e.oxw();return e.KtG(_.open_center_Form("getCenterById",i.centerId))}),e.TgZ(2,"mat-icon",30),e._uU(3,"edit"),e.qZA()()()}}function ee(n,o){1&n&&e._UZ(0,"tr",31)}function te(n,o){1&n&&e._UZ(0,"tr",32)}const ne=function(){return[10,20,50]};let re=(()=>{class n{constructor(t,r,a){this.centerServices=t,this.constant=r,this.dialog=a,this.dialog_title="BMC",this.requestParameters={},this.displayColumns=["centerCode","center","plant","mcc","phoneNo","isActive","actions"],this.companyId=0,this.companyId=Number(this.constant.getData("CompanyId"))}ngOnInit(){this.getAllCenter()}applyFilter(t){this._centerTableDataSource.filter=t.target.value.trim().toLowerCase()}open_center_Form(t,r){const a=new p.vA;a.disableClose=!0,a.autoFocus=!0,a.closeOnNavigation=!0,a.maxHeight="100%",a.maxWidth="100%",a.width="1000px",a.height="fit-content",a.data={action:t,centerId:r},this.dialog.open(b,a).afterClosed().subscribe(_=>{this.getAllCenter()})}getAllCenter(){var t=this;return(0,m.Z)(function*(){t.requestParameters.companyId=t.companyId;var r=yield t.centerServices.getAllCenter(t.requestParameters);t._centerTableDataSource=new s.by(r.data),t._centerTableDataSource.paginator=t.paginator,t._centerTableDataSource.sort=t.sort})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x),e.Y36(y.s),e.Y36(p.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-center"]],viewQuery:function(t,r){if(1&t&&(e.Gf(g.YE,7),e.Gf(Z.NW,7)),2&t){let a;e.iGM(a=e.CRH())&&(r.sort=a.first),e.iGM(a=e.CRH())&&(r.paginator=a.first)}},decls:39,vars:6,consts:[[1,"card"],[1,"card-header","h4"],[1,"card-body"],[1,"row"],[1,"col-lg-4","col-sm-6"],["matInput","","placeholder","Filter",3,"keyup"],[1,"col-lg-6","col-sm-6"],["mat-icon-button","",1,"round-button",3,"click"],[1,"icon-white"],[1,"col-12","mat-table-container"],["matSort","",1,"table-width","table-bordered",3,"dataSource"],["matColumnDef","centerCode"],["mat-sort-header","","class","col-lg-2",4,"matHeaderCellDef"],["class","col-lg-2",4,"matCellDef"],["matColumnDef","center"],["matColumnDef","plant"],["matColumnDef","mcc"],["matColumnDef","phoneNo"],["matColumnDef","isActive"],["matColumnDef","actions"],["class","col-lg-1",4,"matHeaderCellDef"],["class","col-lg-1",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of periodic elements",3,"pageSizeOptions"],["mat-sort-header","",1,"col-lg-2"],[1,"col-lg-2"],[3,"ngClass"],[1,"col-lg-1"],["mat-icon-button","",3,"click"],[2,"color","#003b9a"],["mat-header-row",""],["mat-row","",1,"example-element-row"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"mat-form-field")(7,"input",5),e.NdJ("keyup",function(i){return r.applyFilter(i)}),e.qZA()()(),e.TgZ(8,"div",6)(9,"button",7),e.NdJ("click",function(){return r.open_center_Form("addCenter",0)}),e.TgZ(10,"mat-icon",8),e._uU(11,"add"),e.qZA()()()(),e.TgZ(12,"div",3)(13,"div",9)(14,"mat-table",10),e.ynx(15,11),e.YNc(16,M,2,0,"mat-header-cell",12),e.YNc(17,Q,2,1,"mat-cell",13),e.BQk(),e.ynx(18,14),e.YNc(19,O,2,0,"mat-header-cell",12),e.YNc(20,w,2,1,"mat-cell",13),e.BQk(),e.ynx(21,15),e.YNc(22,j,2,0,"mat-header-cell",12),e.YNc(23,R,2,1,"mat-cell",13),e.BQk(),e.ynx(24,16),e.YNc(25,G,2,0,"mat-header-cell",12),e.YNc(26,V,2,1,"mat-cell",13),e.BQk(),e.ynx(27,17),e.YNc(28,H,2,0,"mat-header-cell",12),e.YNc(29,$,2,1,"mat-cell",13),e.BQk(),e.ynx(30,18),e.YNc(31,W,2,0,"mat-header-cell",12),e.YNc(32,E,3,5,"mat-cell",13),e.BQk(),e.ynx(33,19),e.YNc(34,X,2,0,"mat-header-cell",20),e.YNc(35,K,4,0,"mat-cell",21),e.BQk(),e.YNc(36,ee,1,0,"tr",22),e.YNc(37,te,1,0,"tr",23),e.qZA(),e._UZ(38,"mat-paginator",24),e.qZA()()()()),2&t&&(e.xp6(2),e.hij(" ",r.dialog_title," "),e.xp6(12),e.Q6J("dataSource",r._centerTableDataSource),e.xp6(22),e.Q6J("matHeaderRowDef",r.displayColumns),e.xp6(1),e.Q6J("matRowDefColumns",r.displayColumns),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(5,ne)))},dependencies:[f.mk,u.KE,C.o6,C.RK,v.Hw,Z.NW,g.YE,g.nU,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,T.Nt],styles:[".mat-column-centerCode[_ngcontent-%COMP%], .mat-column-center[_ngcontent-%COMP%], .mat-column-plant[_ngcontent-%COMP%], .mat-column-mcc[_ngcontent-%COMP%], .mat-column-isActive[_ngcontent-%COMP%]{text-align:left;justify-content:center;align-self:stretch;padding-left:5px;padding-right:5px;border-right:1px solid rgba(0,0,0,.12)}.mat-column-phoneNo[_ngcontent-%COMP%]{text-align:right;justify-content:flex-start!important;align-self:stretch;padding-left:5px;padding-right:5px;word-break:break-word;border-right:1px solid rgba(0,0,0,.12)}"]}),n})();var oe=c(9299),D=c(3870),ae=c(811),ie=c(9602),ce=c(782),le=c(266),se=c(1366);const me=[{path:"",component:re,canActivate:[D.a]},{path:"centerForm",component:b,canActivate:[D.a]}];let pe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[f.ez,P.LD,l.u5,u.lN,h.QW,ce.N6,C.ot,ae.vV,v.Ps,p.Is,A.ZX,le.AV,Z.TU,g.JX,s.p0,se.IJ,l.u5,ie.FA,l.UX,v.Ps,q.p9,T.c,C.ot,oe.Bz.forChild(me)]}),n})()}}]);